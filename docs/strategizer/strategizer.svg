<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="470px" preserveAspectRatio="none" style="width:1526px;height:470px;background:#FFFFFF;" version="1.1" viewBox="0 0 1526 470" width="1526px" zoomAndPan="magnify"><defs><filter height="300%" id="f346k7zlnvchk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[aa2f05b2676d7d34ffa7e771fb7634f3]
cluster client--><polygon fill="#FFFFFF" filter="url(#f346k7zlnvchk)" points="16,326,68,326,75,348.2969,1509,348.2969,1509,463,16,463,16,326" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="75" y1="348.2969" y2="348.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="46" x="20" y="340.9951">client</text><!--MD5=[40d1613c15b34f9e18335c8b48ef5421]
cluster strategizer--><polygon fill="#FFFFFF" filter="url(#f346k7zlnvchk)" points="370,6,467,6,474,28.2969,1047,28.2969,1047,302,370,302,370,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="370" x2="474" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="374" y="20.9951">strategizer</text><!--MD5=[335f4d9be48430461c68bf6d6fdba145]
class App--><rect codeLine="4" fill="#FEFECE" filter="url(#f346k7zlnvchk)" height="86.4141" id="App" style="stroke:#A80036;stroke-width:1.5;" width="361" x="720.5" y="361"/><ellipse cx="884.75" cy="377" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M887.0938,372.6719 C886.1563,372.2344 885.5625,372.0938 884.6875,372.0938 C882.0625,372.0938 880.0625,374.1719 880.0625,376.8906 L880.0625,378.0156 C880.0625,380.5938 882.1719,382.4844 885.0625,382.4844 C886.2813,382.4844 887.4375,382.1875 888.1875,381.6406 C888.7656,381.2344 889.0938,380.7813 889.0938,380.3906 C889.0938,379.9375 888.7031,379.5469 888.2344,379.5469 C888.0156,379.5469 887.8125,379.625 887.625,379.8125 C887.1719,380.2969 887.1719,380.2969 886.9844,380.3906 C886.5625,380.6563 885.875,380.7813 885.1094,380.7813 C883.0625,380.7813 881.7656,379.6875 881.7656,377.9844 L881.7656,376.8906 C881.7656,375.1094 883.0156,373.7969 884.75,373.7969 C885.3281,373.7969 885.9375,373.9531 886.4063,374.2031 C886.8906,374.4844 887.0625,374.7031 887.1563,375.1094 C887.2188,375.5156 887.25,375.6406 887.3906,375.7656 C887.5313,375.9063 887.7656,376.0156 887.9844,376.0156 C888.25,376.0156 888.5156,375.875 888.6875,375.6563 C888.7969,375.5 888.8281,375.3125 888.8281,374.8906 L888.8281,373.4688 C888.8281,373.0313 888.8125,372.9063 888.7188,372.75 C888.5625,372.4844 888.2813,372.3438 887.9844,372.3438 C887.6875,372.3438 887.4844,372.4375 887.2656,372.75 L887.0938,372.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="905.25" y="381.1543">App</text><line style="stroke:#A80036;stroke-width:1.5;" x1="721.5" x2="1080.5" y1="393" y2="393"/><polygon fill="none" points="731.5,399,735.5,403,731.5,407,727.5,403" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="265" x="740.5" y="407.2104">strategizer: Strategizer&lt;Text, CensuredText&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="721.5" x2="1080.5" y1="413.8047" y2="413.8047"/><ellipse cx="731.5" cy="424.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="335" x="740.5" y="428.0151">constructor(strategizer: Strategizer&lt;Text, CensuredText&gt;)</text><ellipse cx="731.5" cy="437.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="328" x="740.5" y="440.8198">async run(source: string, content: string): Promise&lt;string&gt;</text><path d="M1117,371.5 L1117,395.1992 L1068.5,437.0117 L1117,403.1992 L1117,426.8984 A0,0 0 0 0 1117,426.8984 L1493,426.8984 A0,0 0 0 0 1493,426.8984 L1493,381.5 L1483,371.5 L1117,371.5 A0,0 0 0 0 1117,371.5 " fill="#FBFB77" filter="url(#f346k7zlnvchk)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1483,371.5 L1483,381.5 L1493,381.5 L1483,371.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="1123" y="388.5669">const text: Text = { source, content };</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="355" x="1123" y="403.6997">const processed = await this.strategizer.execute(text);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="1123" y="418.8325">return processed?.censuredContent || text.content;</text><!--MD5=[cbf8e11bb1737084e7430357bbd61061]
class ReliableSourceStrategy--><rect codeLine="16" fill="#FEFECE" filter="url(#f346k7zlnvchk)" height="73.6094" id="ReliableSourceStrategy" style="stroke:#A80036;stroke-width:1.5;" width="309" x="376.5" y="367"/><ellipse cx="398.25" cy="383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M400.5938,378.6719 C399.6563,378.2344 399.0625,378.0938 398.1875,378.0938 C395.5625,378.0938 393.5625,380.1719 393.5625,382.8906 L393.5625,384.0156 C393.5625,386.5938 395.6719,388.4844 398.5625,388.4844 C399.7813,388.4844 400.9375,388.1875 401.6875,387.6406 C402.2656,387.2344 402.5938,386.7813 402.5938,386.3906 C402.5938,385.9375 402.2031,385.5469 401.7344,385.5469 C401.5156,385.5469 401.3125,385.625 401.125,385.8125 C400.6719,386.2969 400.6719,386.2969 400.4844,386.3906 C400.0625,386.6563 399.375,386.7813 398.6094,386.7813 C396.5625,386.7813 395.2656,385.6875 395.2656,383.9844 L395.2656,382.8906 C395.2656,381.1094 396.5156,379.7969 398.25,379.7969 C398.8281,379.7969 399.4375,379.9531 399.9063,380.2031 C400.3906,380.4844 400.5625,380.7031 400.6563,381.1094 C400.7188,381.5156 400.75,381.6406 400.8906,381.7656 C401.0313,381.9063 401.2656,382.0156 401.4844,382.0156 C401.75,382.0156 402.0156,381.875 402.1875,381.6563 C402.2969,381.5 402.3281,381.3125 402.3281,380.8906 L402.3281,379.4688 C402.3281,379.0313 402.3125,378.9063 402.2188,378.75 C402.0625,378.4844 401.7813,378.3438 401.4844,378.3438 C401.1875,378.3438 400.9844,378.4375 400.7656,378.75 L400.5938,378.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="413.75" y="387.1543">ReliableSourceStrategy</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="119" x="569.5" y="364"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="117" x="570.5" y="376.1387">Text, CensuredText</text><line style="stroke:#A80036;stroke-width:1.5;" x1="377.5" x2="684.5" y1="399" y2="399"/><line style="stroke:#A80036;stroke-width:1.5;" x1="377.5" x2="684.5" y1="407" y2="407"/><ellipse cx="387.5" cy="418" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="251" x="396.5" y="421.2104">evaluate(context: Text): Promise&lt;boolean&gt;</text><ellipse cx="387.5" cy="430.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="283" x="396.5" y="434.0151">execute(context: Text): Promise&lt;CensuredText&gt;</text><!--MD5=[4e2851ef0739d899dac87ab0bc559a8a]
class UnreliableSourceStrategy--><rect codeLine="21" fill="#FEFECE" filter="url(#f346k7zlnvchk)" height="73.6094" id="UnreliableSourceStrategy" style="stroke:#A80036;stroke-width:1.5;" width="309" x="32.5" y="367"/><ellipse cx="47.95" cy="383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M50.2938,378.6719 C49.3563,378.2344 48.7625,378.0938 47.8875,378.0938 C45.2625,378.0938 43.2625,380.1719 43.2625,382.8906 L43.2625,384.0156 C43.2625,386.5938 45.3719,388.4844 48.2625,388.4844 C49.4813,388.4844 50.6375,388.1875 51.3875,387.6406 C51.9656,387.2344 52.2938,386.7813 52.2938,386.3906 C52.2938,385.9375 51.9031,385.5469 51.4344,385.5469 C51.2156,385.5469 51.0125,385.625 50.825,385.8125 C50.3719,386.2969 50.3719,386.2969 50.1844,386.3906 C49.7625,386.6563 49.075,386.7813 48.3094,386.7813 C46.2625,386.7813 44.9656,385.6875 44.9656,383.9844 L44.9656,382.8906 C44.9656,381.1094 46.2156,379.7969 47.95,379.7969 C48.5281,379.7969 49.1375,379.9531 49.6063,380.2031 C50.0906,380.4844 50.2625,380.7031 50.3563,381.1094 C50.4188,381.5156 50.45,381.6406 50.5906,381.7656 C50.7313,381.9063 50.9656,382.0156 51.1844,382.0156 C51.45,382.0156 51.7156,381.875 51.8875,381.6563 C51.9969,381.5 52.0281,381.3125 52.0281,380.8906 L52.0281,379.4688 C52.0281,379.0313 52.0125,378.9063 51.9188,378.75 C51.7625,378.4844 51.4813,378.3438 51.1844,378.3438 C50.8875,378.3438 50.6844,378.4375 50.4656,378.75 L50.2938,378.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="62.05" y="387.1543">UnreliableSourceStrategy</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="119" x="225.5" y="364"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="117" x="226.5" y="376.1387">Text, CensuredText</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="340.5" y1="399" y2="399"/><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="340.5" y1="407" y2="407"/><ellipse cx="43.5" cy="418" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="251" x="52.5" y="421.2104">evaluate(context: Text): Promise&lt;boolean&gt;</text><ellipse cx="43.5" cy="430.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="283" x="52.5" y="434.0151">execute(context: Text): Promise&lt;CensuredText&gt;</text><!--MD5=[d97a15814f9abe4b28c47abd35ea708c]
class strategizer.Strategy--><rect codeLine="30" fill="#FEFECE" filter="url(#f346k7zlnvchk)" height="73.6094" id="strategizer.Strategy" style="stroke:#A80036;stroke-width:1.5;" width="254" x="404" y="212"/><ellipse cx="488.25" cy="228" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M489.2031,224.7813 L490.9219,224.7813 C491.3125,224.7813 491.5,224.75 491.625,224.6719 C491.8906,224.5156 492.0313,224.2344 492.0313,223.9375 C492.0313,223.6719 491.9219,223.4063 491.6875,223.2344 C491.5156,223.125 491.375,223.0938 490.9219,223.0938 L485.7813,223.0938 C485.3438,223.0938 485.2188,223.1094 485.0625,223.2031 C484.8125,223.3594 484.6563,223.6563 484.6563,223.9375 C484.6563,224.2188 484.7969,224.4688 485.0156,224.6406 C485.1719,224.75 485.3594,224.7813 485.7813,224.7813 L487.5,224.7813 L487.5,231.2969 L485.7813,231.2969 C485.3438,231.2969 485.2188,231.3125 485.0625,231.4219 C484.8125,231.5781 484.6563,231.8594 484.6563,232.1563 C484.6563,232.4063 484.7969,232.6719 485.0156,232.8281 C485.1719,232.9531 485.375,233 485.7813,233 L490.9219,233 C491.6719,233 492.0313,232.7188 492.0313,232.1563 C492.0313,231.875 491.9219,231.625 491.6875,231.4531 C491.5156,231.3281 491.375,231.2969 490.9219,231.2969 L489.2031,231.2969 L489.2031,224.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="52" x="508.75" y="232.1543">Strategy</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="23" x="638" y="209"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="21" x="639" y="221.1387">I, O</text><line style="stroke:#A80036;stroke-width:1.5;" x1="405" x2="657" y1="244" y2="244"/><line style="stroke:#A80036;stroke-width:1.5;" x1="405" x2="657" y1="252" y2="252"/><ellipse cx="415" cy="263" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="228" x="424" y="266.2104">evaluate(context: I): Promise&lt;boolean&gt;</text><ellipse cx="415" cy="275.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="424" y="279.0151">execute(context: I): Promise&lt;O&gt;</text><!--MD5=[09538f164a95473e4744108f4d4d679d]
class strategizer.Strategizer--><rect codeLine="35" fill="#FEFECE" filter="url(#f346k7zlnvchk)" height="99.2188" id="strategizer.Strategizer" style="stroke:#A80036;stroke-width:1.5;" width="326" x="386" y="47"/><ellipse cx="498.75" cy="63" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M501.0938,58.6719 C500.1563,58.2344 499.5625,58.0938 498.6875,58.0938 C496.0625,58.0938 494.0625,60.1719 494.0625,62.8906 L494.0625,64.0156 C494.0625,66.5938 496.1719,68.4844 499.0625,68.4844 C500.2813,68.4844 501.4375,68.1875 502.1875,67.6406 C502.7656,67.2344 503.0938,66.7813 503.0938,66.3906 C503.0938,65.9375 502.7031,65.5469 502.2344,65.5469 C502.0156,65.5469 501.8125,65.625 501.625,65.8125 C501.1719,66.2969 501.1719,66.2969 500.9844,66.3906 C500.5625,66.6563 499.875,66.7813 499.1094,66.7813 C497.0625,66.7813 495.7656,65.6875 495.7656,63.9844 L495.7656,62.8906 C495.7656,61.1094 497.0156,59.7969 498.75,59.7969 C499.3281,59.7969 499.9375,59.9531 500.4063,60.2031 C500.8906,60.4844 501.0625,60.7031 501.1563,61.1094 C501.2188,61.5156 501.25,61.6406 501.3906,61.7656 C501.5313,61.9063 501.7656,62.0156 501.9844,62.0156 C502.25,62.0156 502.5156,61.875 502.6875,61.6563 C502.7969,61.5 502.8281,61.3125 502.8281,60.8906 L502.8281,59.4688 C502.8281,59.0313 502.8125,58.9063 502.7188,58.75 C502.5625,58.4844 502.2813,58.3438 501.9844,58.3438 C501.6875,58.3438 501.4844,58.4375 501.2656,58.75 L501.0938,58.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="519.25" y="67.1543">Strategizer</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="23" x="692" y="44"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="21" x="693" y="56.1387">I, O</text><line style="stroke:#A80036;stroke-width:1.5;" x1="387" x2="711" y1="79" y2="79"/><polygon fill="none" points="397,85,401,89,397,93,393,89" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="198" x="406" y="93.2104">strategies: Array&lt;Strategy&lt;I, O&gt;&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="387" x2="711" y1="99.8047" y2="99.8047"/><ellipse cx="397" cy="110.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="300" x="406" y="114.0151">register(strategy: Strategy&lt;I, O&gt;): Strategizer&lt;I, O&gt;</text><ellipse cx="397" cy="123.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="259" x="406" y="126.8198">unregister(strategy: Strategy&lt;I, O&gt;): boolean</text><ellipse cx="397" cy="136.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="294" x="406" y="139.6245">async execute(context: I): Promise&lt;O | undefined&gt;</text><path d="M747,41 L747,87.3984 L700,135.8164 L747,95.3984 L747,141.7969 A0,0 0 0 0 747,141.7969 L1031,141.7969 A0,0 0 0 0 1031,141.7969 L1031,51 L1021,41 L747,41 A0,0 0 0 0 747,41 " fill="#FBFB77" filter="url(#f346k7zlnvchk)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1021,41 L1021,51 L1031,51 L1021,41 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="753" y="58.0669">for (const strategy of this.strategies) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="769" y="73.1997">if (await strategy.evaluate(context)) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="785" y="88.3325">return strategy.execute(context);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="769" y="103.4653">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="753" y="118.5981">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="753" y="133.731">return undefined;</text><!--MD5=[54ab053c14e29bac1557ca200198781f]
link App to App$$$RIGHT--><!--MD5=[b8ff06290b79ca487e6f51f0f663ba01]
reverse link strategizer.Strategy to ReliableSourceStrategy--><path d="M531,306.126 C531,306.126 531,366.908 531,366.908 " fill="none" id="strategizer.Strategy-backto-ReliableSourceStrategy" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="524,306.126,531,286.126,538,306.126,524,306.126" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[85f53316d0aac525d7371f2167609785]
reverse link strategizer.Strategy to UnreliableSourceStrategy--><path d="M383.884,249 C383.884,249 187,249 187,249 C187,249 187,321.018 187,366.874 " fill="none" id="strategizer.Strategy-backto-UnreliableSourceStrategy" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="383.884,242,403.884,249,383.884,256,383.884,242" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[612cec53eb9e0aa4ba061d31fa36b541]
link App to strategizer.Strategizer--><path codeLine="26" d="M720.394,404 C707.095,404 698.75,404 698.75,404 C698.75,404 698.75,151.247 698.75,151.247 " fill="none" id="App-to-strategizer.Strategizer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="698.75,146.247,694.75,155.247,698.75,151.247,702.75,155.247,698.75,146.247" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4cb0256cf96e0dacc983b40f313d512f]
link strategizer.Strategizer to strategizer.Strategizer$$$RIGHT--><!--MD5=[a060e80d7ad172ff8aff3ccef6c34050]
link strategizer.Strategizer to strategizer.Strategy--><path codeLine="51" d="M531,146.012 C531,146.012 531,206.815 531,206.815 " fill="none" id="strategizer.Strategizer-to-strategizer.Strategy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="531,211.815,535,202.815,531,206.815,527,202.815,531,211.815" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="505.9516" y="200.969">0..*</text><!--MD5=[c8dab167a0d74e650ab5d4944540f12b]
@startuml
skinparam linetype ortho

package client {
    class App {
        # strategizer: Strategizer<Text, CensuredText>

        + constructor(strategizer: Strategizer<Text, CensuredText>)
        + async run(source: string, content: string): Promise<string>
    }
    note right of App::run
        const text: Text = { source, content };
        const processed = await this.strategizer.execute(text);
        return processed?.censuredContent || text.content;
    end note

    class ReliableSourceStrategy<Text, CensuredText> implements strategizer.Strategy {
        + evaluate(context: Text): Promise<boolean>
        + execute(context: Text): Promise<CensuredText>
    }

    class UnreliableSourceStrategy<Text, CensuredText> implements strategizer.Strategy {
        + evaluate(context: Text): Promise<boolean>
        + execute(context: Text): Promise<CensuredText>
    }

    App - -> strategizer.Strategizer
}

package strategizer {
    interface Strategy<I, O> {
        + evaluate(context: I): Promise<boolean>
        + execute(context: I): Promise<O>
    }

    class Strategizer<I, O> {
        # strategies: Array<Strategy<I, O>>
        
        + register(strategy: Strategy<I, O>): Strategizer<I, O>
        + unregister(strategy: Strategy<I, O>): boolean
        + async execute(context: I): Promise<O | undefined>
    }
    note right of Strategizer::execute
        for (const strategy of this.strategies) {
            if (await strategy.evaluate(context)) {
                return strategy.execute(context);
            }
        }
        return undefined;
    end note    

    Strategizer - -> "0..*" Strategy
}
@enduml

PlantUML version 1.2021.10beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>